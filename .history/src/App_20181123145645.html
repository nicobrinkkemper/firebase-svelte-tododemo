fwefwefwefewfwe

<script>
	const ENTER_KEY = 13;
	const ESCAPE_KEY = 27;
	function keyEvent(code) {
	  return function(node, callback) {
	    function keydownHandler(event) {
	      if (event.which === code) callback.call(this, event);
	    }
	    node.addEventListener("keydown", keydownHandler, false);
	    return {
	      destroy() {
	        node.removeEventListener("keydown", keydownHandler, false);
	      }
	    };
	  };
	}
	let todos;
	try {
	  todos = JSON.parse(localStorage.getItem("todos-svelte")) || [];
	} catch (err) {
	  todos = [];
	}
	export default {
	  data: () => {
	    return {
	      currentFilter: "all",
	      todo: {
	        text: "",
	        datetime: new Date(),
	        priority: 0
		  },
		  todos
	    };
	  },
	  computed: {
	    numActive: ({ todos }) => todos.filter(item => !item.completed).length,
	    numCompleted: ({ todos }) => todos.filter(item => item.completed).length
	  },
	  helpers: {
	    filter(item, currentFilter) {
	      if (currentFilter === "all") return true;
	      if (currentFilter === "completed") return item.completed;
	      if (currentFilter === "active") return !item.completed;
	    }
	  },
	  oncreate() {
	    const updateView = () => {
	      let currentFilter = "all";
	      if (window.location.hash === "#/active") {
	        currentFilter = "active";
	      } else if (window.location.hash === "#/completed") {
	        currentFilter = "completed";
	      }
	      this.set({ currentFilter });
	    };
	    window.addEventListener("hashchange", updateView);
	    updateView();
	  },
	  onstate({ changed, current, previous }) {
	    if (previous && changed.todos) {
	      try {
	        localStorage.setItem("todos-svelte", JSON.stringify(current.todos));
	      } catch (err) {
	        // noop
	      }
	    }
	  },
	  methods: {
	    onTextChange(text) {
	      const { todo } = this.get();
	      this.set({ todo: { ...todo, text } });
	    },
	    onSubmit() {},
	    onPriorityChange(priority) {
	      const { todo } = this.get();
	      this.set({ todo: { ...todo, priority } });
	    },
	    onAdd() {
	      console.log("hi");
	    },
	    blur(node) {
	      node.blur();
	    },
	    cancel() {
	      this.set({ editing: null });
	    },
	    clearCompleted() {
	      const todos = this.get().todos.filter(item => !item.completed);
	      this.set({ todos });
	    },
	    edit(index) {
	      this.set({ editing: index });
	    },
	    newTodo(description) {
	      const { todos } = this.get();
	      todos.push({
	        description,
	        completed: false
	      });
	      this.set({ todos });
	      this.refs.newTodo.value = "";
	    },
	    remove(index) {
	      const { todos } = this.get();
	      todos.splice(index, 1);
	      this.set({ todos });
	    },
	    submit(description) {
	      const { todos } = this.get();
	      const index = this.get().editing;
	      todos[index].description = description;
	      this.set({ todos, editing: null });
	    },
	    toggleAll(checked) {
	      const { todos } = this.get();
	      todos.forEach(item => {
	        item.completed = checked;
	      });
	      this.set({ todos });
	    }
	  },
	  events: {
	    enter: keyEvent(ENTER_KEY),
	    escape: keyEvent(ESCAPE_KEY)
	  }
	};
</script>